!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=136)}({134:function(t,e,n){},135:function(t,e,n){var i=n(134);"string"==typeof i&&(i=[[t.i,i,""]]);var o={sourceMap:!0,hmr:!0,transform:void 0,insertInto:void 0};n(97)(i,o);i.locals&&(t.exports=i.locals)},136:function(t,e,n){"use strict";n(135);var i,o=n(92),r=n(95),a=(i=r)&&i.__esModule?i:{default:i};tinymce.PluginManager.add("wallsio",function(t){function e(t){l(t.target)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}function n(t){if(l(t.target)){var e=jQuery(t.target).closest(".wpview").get(0);u(e)&&(t.preventDefault(),i(e))}}function i(e){var n=function(t){var e=jQuery(t).attr("data-wpview-text");if(!e||"string"!=typeof e)return{};var n=decodeURIComponent(e);return(0,o.toDetails)(n)}(e);(new a.default).open(n,function(n){!function(e,n){var i=(0,o.fromDetails)(n);jQuery(e).data("rendered",!1),t.dom.setAttrib(e,"data-wpview-text",encodeURIComponent(i)),wp.mce.views.createInstance("embedURL",i,{url:!0},!1).render(),t.selection.select(e),t.nodeChanged(),t.focus()}(e,n)})}function r(e){u(e.element)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),e.toolbar=t.wp._createToolbar(["wallsio_view_edit","wallsio_view_remove"]))}function l(t){return s(t,'.wpview iframe[src^="https://walls.io/"]~ .mce-shim')}function s(t,e){return jQuery(t).filter(e).length>0}function u(t){return s(t,".wpview")&&function(t,e){return null!==t.querySelector(e)}(t,'.wpview iframe[src^="https://walls.io/"]')}t.addButton("wallsio_view_edit",{tooltip:"Edit Wall",icon:"dashicon dashicons-edit",onclick:function(){var e=t.selection.getNode();if(!u(e))return;i(e)}}),t.addButton("wallsio_view_remove",{tooltip:"Remove",icon:"dashicon dashicons-no",onclick:function(){return t.fire("cut")}}),t.on("init",function(){t.on("Click",e,!0),t.on("DblClick",n),t.on("wptoolbar",r,!0)})})},90:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toInt=function(t,e){var n=parseInt(t,10);return isNaN(n)?e:n},e.boolToInt=function(t){return t?1:0},e.isObject=function(t){return t===Object(t)}},91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.restrictions={minHeight:200,maxHeight:2500},e.defaultDetails={height:600,showHeader:!1,showBackground:!0}},92:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.fromDetails=a,e.toDetails=l,e.toWallBaseUrl=function(t){return a({wallIdentifier:l(t).wallIdentifier})},e.initialWallUrl=function(t){return u(t,o.defaultDetails)},e.initialWallUrlWithDetails=u;var o=n(91),r=n(90);function a(t){if(!(0,r.isObject)(t))return null;var e=t.wallIdentifier;return e?"https://walls.io/"+e+("?"+function(t){var e=[];if(t.hasOwnProperty("showHeader")){var n="show_header="+(0,r.boolToInt)(t.showHeader);e.push(n)}if(t.hasOwnProperty("showBackground")){var i="nobackground="+(0,r.boolToInt)(!t.showBackground);e.push(i)}if(t.width){var o="embedwidth="+t.width;e.push(o)}else{e.push("embedwidth=auto")}if(t.hasOwnProperty("height")){var a="embedheight="+t.height;e.push(a)}return e}(t).join("&")):null}function l(t){var e=function(t){var e=document.createElement("a");e.href=t;var n={},i=!0,o=!1,r=void 0;try{for(var a,l=["host","hostname","hash","href","pathname","port","protocol","search"][Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;n[u]=s(e,u)}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}var c=n.pathname.replace(/^[/]?/,"/");c.startsWith("/")||(n.pathname="/"+c);return n}(t);if("walls.io"!==e.host)return{};var n={};if(n.wallIdentifier=function(t){var e=(t=t.replace(/\/$/,"")).match(/^\/([\w-]{2,})$/i);if(!e)return null;return e[1]}(e.pathname),!n.wallIdentifier)return{};var o=function(t){var e=(t||"").match(/[?](.+)/);if(!e)return{};var n=e[1].split("&"),o={},r=!0,a=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value,p=c.split("="),d=i(p,2),h=d[0],f=d[1];o[h]=void 0===f?null:f}}catch(t){a=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}return o}(e.search);return o.hasOwnProperty("embedheight")&&(n.height=o.embedheight),o.hasOwnProperty("embedwidth")&&(n.width=o.embedwidth),o.hasOwnProperty("show_header")&&(n.showHeader="1"===o.show_header),o.hasOwnProperty("nobackground")&&(n.showBackground="1"!==o.nobackground),n}function s(t,e){return"host"===e?t.host.replace(/(:443)|(:80)$/,""):"pathname"===e?t.pathname.replace(/^[/]?/,"/"):t[e]}function u(t,e){return e.wallIdentifier=t,a(e)}},93:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomInt=function(){return function(t){return Math.floor(Math.random()*t)}(Number.MAX_SAFE_INTEGER||Math.pow(2,52))}},94:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="wallsio-popup-wrapper" data-auto-width="'+__e(isAutoWidth)+'"><div class="wallsio-popup"><div class="wallsio-popup-content"><div class="wallsio-input-section"><label class="wallsio-input-label" for="wallsio-wallidentifier-input-'+__e(popupIntId)+'">Wall URL</label><div class="wallsio-input-group-left"><label for="wallsio-wallidentifier-input-'+__e(popupIntId)+'" class="wallsio-input-group-addon-left">walls.io /</label><input type="text" class="wallsio-input wallsio-input-right wallsio-url-input" id="wallsio-wallidentifier-input-'+__e(popupIntId)+'" value="'+__e(wallIdentifier)+'"></div></div><div class="wallsio-input-section"><label class="wallsio-input-label" for="wallsio-width-select-'+__e(popupIntId)+'">Width</label><div class="wallsio-multiple-inputs"><select class="wallsio-select wallsio-first-input wallsio-width-select" id="wallsio-width-select-'+__e(popupIntId)+'"><option value="auto" '+__e(isAutoWidth?"selected":"")+' >Full width (responsive)</option><option value="fixed" '+__e(isAutoWidth?"":"selected")+' >Fixed width</option></select><div class="wallsio-input-group-right wallsio-second-input wallsio-fixed-width-input-group"><input type="number" class="wallsio-input wallsio-input-left wallsio-fixed-width-input" id="wallsio-width-input-'+__e(popupIntId)+'" min="0" max="9999" value="'+__e(width)+'" placeholder="'+__e(defaultWidth)+'"><label for="wallsio-width-input-'+__e(popupIntId)+'" class="wallsio-input-group-addon-right">px</label></div></div></div><div class="wallsio-input-section"><label class="wallsio-input-label" for="wallsio-height-input-'+__e(popupIntId)+'">Height</label><div class="wallsio-input-group-right"><input type="number" class="wallsio-input wallsio-input-left wallsio-height-input" id="wallsio-height-input-'+__e(popupIntId)+'" min="0" max="9999" value="'+__e(height)+'" placeholder="'+__e(defaultHeight)+'"><label for="wallsio-height-input-'+__e(popupIntId)+'" class="wallsio-input-group-addon-right">px</label></div></div><div class="wallsio-input-section wallsio-checkbox-input-section"><label class="wallsio-input-label wallsio-checkbox-label" for="wallsio-show-header-checkbox-'+__e(popupIntId)+'"><input type="checkbox" id="wallsio-show-header-checkbox-'+__e(popupIntId)+'" name="wallsio-show-header-checkbox" class="wallsio-show-header-checkbox" '+__e(showHeader?"checked":"")+' ><span class="wallsio-checkbox-caption"><span class="wallsio-checkbox-caption-headline">Show wall header</span><span class="wallsio-checkbox-caption-help">Display a header bar at the top of the wall</span></span></label></div><div class="wallsio-input-section wallsio-checkbox-input-section"><label class="wallsio-input-label wallsio-checkbox-label" for="wallsio-show-background-checkbox-'+__e(popupIntId)+'"><input type="checkbox" id="wallsio-show-background-checkbox-'+__e(popupIntId)+'" name="wallsio-show-background-checkbox" class="wallsio-show-background-checkbox" '+__e(showBackground?"checked":"")+' ><span class="wallsio-checkbox-caption"><span class="wallsio-checkbox-caption-headline">Show wall background</span><span class="wallsio-checkbox-caption-help">Display the wall background color and image</span></span></label></div></div><div class="wallsio-button-bar"><span class="wallsio-cancel">Cancel</span><button type="button" class="wallsio-insert button button-primary button-large">Insert into post</button></div></div></div>';return __p}},95:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(94),a=(i=r)&&i.__esModule?i:{default:i},l=n(93);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$context=e,this.$overlay=null,this.$popup=null}return o(t,[{key:"open",value:function(t,e){this.allValues=Object.assign({},{wallIdentifier:"",width:"auto",height:null,defaultWidth:560,defaultHeight:800,showBackground:!1,showHeader:!1},t);var n=this.getTemplateValues(this.allValues),i=(0,a.default)(n);this.$popup=jQuery(i),this.updateAutoWidth(),this.insertIntoDom(this.$popup),this.addEventListeners(e),this.focus()}},{key:"insertIntoDom",value:function(){this.getOrCreateWrapper().prepend(this.$popup)}},{key:"getOrCreateWrapper",value:function(){return this.$context?this.$context:this.$overlay?this.$overlay:(this.$overlay=this.createOverlay(),jQuery(document.body).append(this.$overlay),this.$overlay)}},{key:"createOverlay",value:function(){return jQuery("<div>",{class:"wallsio-overlay media-modal-backdrop"})}},{key:"getTemplateValues",value:function(t){var e="auto"===t.width?1:0,n="auto"===t.width?"":t.width,i=(0,l.randomInt)();return Object.assign({},t,{isAutoWidth:e,popupIntId:i,width:n})}},{key:"addEventListeners",value:function(t){var e=this;this.$popup.on("click",".wallsio-cancel",function(){e.close()}),this.$popup.on("click",".wallsio-insert",function(){e.handleSubmitIntent(t)}),this.$popup.on("keydown",function(n){e.isEnterButton(n)&&(n.preventDefault(),e.handleSubmitIntent(t))}),this.$popup.on("keyup",function(t){e.isEscButton(t)&&(t.preventDefault(),e.close())}),this.$overlay&&(this.$overlay.on("click",function(t){e.isCurrentTarget(t)&&(t.preventDefault(),e.close())}),this.$overlay.on("keyup",function(t){e.isEscButton(t)&&(t.preventDefault(),e.close())})),this.$popup.find(".wallsio-width-select").on("change",function(){e.updateAutoWidth()})}},{key:"updateAutoWidth",value:function(){var t="auto"===this.getWidth()?1:0;this.$popup.attr("data-auto-width",t)}},{key:"isCurrentTarget",value:function(t){return t.target===t.currentTarget}},{key:"close",value:function(){this.$popup&&(this.$popup.remove(),this.$popup=null),this.$overlay&&(this.$overlay.remove(),this.$overlay=null)}},{key:"isEscButton",value:function(t){return"Escape"===t.key}},{key:"isEnterButton",value:function(t){return"Enter"===t.key}},{key:"focus",value:function(){this.getFirstInput().focus()}},{key:"getFirstInput",value:function(){return this.$popup.find("input").first()}},{key:"getAllValues",value:function(){return{wallIdentifier:this.getInputValue(".wallsio-url-input"),width:this.getWidth(),height:this.getHeight(),showHeader:this.getCheckboxValue(".wallsio-show-header-checkbox"),showBackground:this.getCheckboxValue(".wallsio-show-background-checkbox")}}},{key:"intVal",value:function(t){return parseInt(t,10)||null}},{key:"getWidth",value:function(){if("auto"===this.getInputValue(".wallsio-width-select"))return"auto";var t=this.getInputValue(".wallsio-fixed-width-input");return this.intVal(t)||this.allValues.defaultWidth}},{key:"getHeight",value:function(){var t=this.getInputValue(".wallsio-height-input");return this.intVal(t)||this.allValues.defaultHeight}},{key:"getInputValue",value:function(t){return(this.$popup.find(t).val()||"").trim()}},{key:"getCheckboxValue",value:function(t){return this.$popup.find(t).is(":checked")}},{key:"handleSubmitIntent",value:function(t){var e=this.getAllValues(),n=e.wallIdentifier;this.isValidWallIdentifier(n)?(t(e),this.close()):alert("Please enter a valid wall URL")}},{key:"isIntString",value:function(t){return parseInt(t,10).toString()===t}},{key:"isValidWallIdentifier",value:function(t){if(!t)return!1;if("string"!=typeof t)return!1;if(this.isIntString(t))return!0;return t.length>=2}},{key:"isOpen",get:function(){return!!this.$popup}}]),t}();e.default=s},96:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},97:function(t,e,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),l=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),s=null,u=0,c=[],p=n(96);function d(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(y(i.parts[a],e))}else{var l=[];for(a=0;a<i.parts.length;a++)l.push(y(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:l}}}}function h(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],a=e.base?r[0]+e.base:r[0],l={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(l):n.push(i[a]={id:a,parts:[l]})}return n}function f(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function w(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),f(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,i,o,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var a=u++;n=s||(s=v(e)),i=_.bind(null,n,a,!1),o=_.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),f(t,e),e}(e),i=function(t,e,n){var i=n.css,o=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(i=p(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,n,e),o=function(){w(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){w(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return d(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(l=r[a.id]).refs--,i.push(l)}t&&d(h(t,e),e);for(o=0;o<i.length;o++){var l;if(0===(l=i[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete r[l.id]}}}};var g,m=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function _(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}}});
//# sourceMappingURL=tinymce.js.map